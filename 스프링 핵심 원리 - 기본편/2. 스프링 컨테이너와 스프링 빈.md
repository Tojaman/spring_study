# π’΅ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ™€ μ¤ν”„λ§ λΉ 
![](Image/{558EC8AA-1155-467B-8BEA-58C12EC99187}.png)
- `ApplicationContext`λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„κ³  μΈν„°νμ΄μ¤μ΄λ‹¤.
- `new AnnotationConfigApplicationContext(AppConfig.class);`λ” `ApplicationContext` μΈν„°νμ΄μ¤ κµ¬ν„μ²΄μ΄λ‹¤.
- `AppConfig`λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ κµ¬μ„± μ •λ³΄λ¥Ό μ„¤μ •ν•λ” μ„¤μ • νμΌμ΄λ‹¤.

## μ¤ν”„λ§ μ»¨ν…μ΄λ„ μƒμ„± κ³Όμ •
![](Image/{D1C21443-E7C2-4685-AD04-884957FE6881}.png)


![](Image/{01607A4E-72FA-46BA-B743-A203B1C5D46B}.png)
- κµ¬μ„± μ •λ³΄(`AppConfig`)λ¥Ό μ°Έκ³ ν•μ—¬ μ¤ν”„λ§ μ»¨ν…μ΄λ„ λ‚΄μ— μλ” μ¤ν”„λ§ λΉ μ €μ¥μ†μ— λΉμ„ λ“±λ΅ν•λ‹¤.
- `@Bean`μ΄ λ¶™μ€ λ©”μ†λ“λ…μ΄ λΉ μ΄λ¦„, λ¦¬ν„΄ν•λ” κ°μ²΄μ μ°Έμ΅°κ°’μ΄ λΉ κ°μ²΄λ΅ λ“±λ΅λλ‹¤.

![](Image/{14D7E5B6-0F31-48F1-AFD1-75E2E3FB95EE}.png)
- μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” μ„¤μ • μ •λ³΄(`AppConfig.class`)λ¥Ό μ°Έκ³ ν•΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…(DI)μ„ ν•λ‹¤.

## μ¤ν”„λ§ λΉ μ΅°ν 
- μ¤ν”„λ§ λΉμ€ **μ¤ν”„λ§ λ‚΄λ¶€μ—μ„ μ‚¬μ©ν•λ” λΉ**κ³Ό **κ°λ°μκ°€ μ •μν• μ• ν”λ¦¬μΌ€μ΄μ… λΉ** λ‘ κ°€μ§€κ°€ μ΅΄μ¬ν•λ‹¤.
	- `ROLE_APPLICATION`: κ°λ°μκ°€ μ •μν• λΉ
	- `ROLE_INFRASTRUCTURE`: μ¤ν”„λ§ λ‚΄λ¶€μ—μ„ μ‚¬μ©ν•λ” λΉ 
- μ¤ν”„λ§ λΉ μ΅°ν λ©”μ„λ“
	- `getBeanDefinitionNames()`: μ¤ν”„λ§μ— λ“±λ΅λ λ¨λ“  λΉ μ΄λ¦„ μ΅°ν
	- `getBean(μ΄λ¦„, νƒ€μ…)`: λΉ μ΄λ¦„μΌλ΅ λΉ κ°μ²΄(μΈμ¤ν„΄μ¤) μ΅°ν
		- `getBean(νƒ€μ…)`: νƒ€μ…λ§μΌλ΅ μ΅°νν•  μ μλ‹¤.
	- `getRole()`: μ¤ν”„λ§ λ‚΄λ¶€ μ‚¬μ© λΉ or κ°λ°μ μ •μ λΉ μ΅°ν
	- `getBeansOfType(νƒ€μ…)`: ν•΄λ‹Ή νƒ€μ…μ λ¨λ“  λΉ μ΅°ν 
![](Image/{AC69B499-385A-48CB-A5CE-AB8D1A6E5D7D}.png)
![](Image/{D5219FE7-E346-4A48-9EF0-9B399EE6794B}.png)
![](Image/{2B65CE0B-C1EA-4DAF-AAF2-BD9CC0B1065B}.png)

### λ™μΌν• νƒ€μ…μ΄ λ‘ μ΄μƒ μλ” κ²½μ°
- νƒ€μ…μΌλ΅ μ΅°νμ‹ κ°™μ€ νƒ€μ…μ μ¤ν”„λ§ λΉμ΄ λ‘ μ΄μƒμ΄λ©΄ μ¤λ¥κ°€ λ°μƒν•λ‹¤.
- μ΄ κ²½μ° λΉ μ΄λ¦„μ„ μ§€μ •ν•΄μ„ μ¤λ¥λ¥Ό ν”Όν•  μ μλ‹¤.
![](Image/{BEF58814-118B-4BA5-BE35-6FBDE733F03E}.png)

### μƒμ† κ΄€κ³„ μ΅°ν
- λ¶€λ¨ νƒ€μ…μΌλ΅ μ΅°νν•λ©΄, μμ‹ νƒ€μ…λ„ ν•¨κ» μ΅°νν•λ‹¤.
- λ¨λ“  μλ°” κ°μ²΄μ μµκ³  λ¶€λ¨μΈ `Object` νƒ€μ…μΌλ΅ μ΅°νν•λ©΄, λ¨λ“  μ¤ν”„λ§ λΉμ„ μ΅°νν•λ‹¤.

![](Image/{434ACAC9-F1F4-4060-9357-5FFC3CEC5902}.png)

![](Image/{742D8343-F921-42DF-9687-2DD1F3EB2FB1}.png)
- `RateDiscountPolicy`μ™€ `FixDiscountPolity` λ‘ μμ‹μ΄ μμΌλ―€λ΅ μ¤‘λ³µ μ¤λ¥κ°€ λ°μƒν•λ‹¤.

![](Image/{35A25946-3E13-492F-8FD3-638B4F4D1C89}.png)
- μμ‹μ΄ λ‘ μ΄μƒ μμΌλ©΄ μμ‹ νƒ€μ…μΌλ΅ μ΅°νν•κ±°λ‚ λΉ μ΄λ¦„μ„ μ§€μ •ν•λ” λ°©λ²•μ΄ μλ‹¤.

![](Image/{AAF8C63C-70B3-4F45-859D-2F748B94D28D}.png)
![](Image/{C1E0C646-B86F-453C-A85E-3B2423B9D704}.png)
- `DiscountPolicy` νƒ€μ…κ³Ό μμ‹ νƒ€μ… λΉ λ¨λ‘ μ΅°ν
- `Object` νƒ€μ…μ„ μ΄μ©ν•μ—¬ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅λ λ¨λ“  λΉ μ΅°ν
## BeanFactoryμ™€ ApplicationContext
![](Image/{F559B684-25D9-4BEA-B6DE-F72F7E1DB62C}.png)
### BeanFactory(μ¤ν”„λ§ μ»¨ν…μ΄λ„)
- μ¤ν”„λ§ μ»¨ν…μ΄λ„μ μµμƒμ„ μΈν„°νμ΄μ¤
- `getBean()` λ©”μ„λ“ μ κ³µ
### ApplicationContext(μ¤ν”„λ§ μ»¨ν…μ΄λ„)
- BeanFactory κΈ°λ¥μ„ μƒμ† λ°›μ•„ μ κ³µν•λ” μΈν„°νμ΄μ¤
- BeanFactoryμ— λ”ν•΄μ„ λ¶€κ°€ κΈ°λ¥λ“¤μ„ μ κ³µν•¨
### AnnotationConfigApplicationContext
- ApplicationContext μΈν„°νμ΄μ¤ κµ¬ν„μ²΄
- μ»¨ν…μ΄λ„ μ ‘κ·Ό μ‹ μ‚¬μ©ν•¨
κ±°μ λ€λ¶€λ¶„μ κ²½μ° λ¶€κ°€ κΈ°λ¥μ΄ ν¬ν•¨λ **ApplicationContext**λ¥Ό μ‚¬μ©ν•¨

![](Image/{3D2353A2-0D80-491F-851D-B0E62F3122E1}.png)

- `ApplicationContext`λ” `BeanFactory`μ—μ„ μ κ³µν•λ” κΈ°λ¥ λΏλ§ μ•„λ‹λΌ λ¶€κ°€μ μΈ κΈ°λ¥λ“¤λ„ μ κ³µν•λ” μΈν„°νμ΄μ¤μ΄λ‹¤.
- λ¶€κ°€ κΈ°λ¥
	- **λ©”μ‹μ§€μ†μ¤λ¥Ό ν™μ©ν• κµ­μ ν™” κΈ°λ¥**
		- μλ¥Ό λ“¤μ–΄μ„ ν•κµ­μ—μ„ λ“¤μ–΄μ¤λ©΄ ν•κµ­μ–΄λ΅, μμ–΄κ¶μ—μ„ λ“¤μ–΄μ¤λ©΄ μμ–΄λ΅ μ¶λ ¥
	- **ν™κ²½λ³€μ**
		- λ΅μ»¬, κ°λ°, μ΄μλ“±μ„ κµ¬λ¶„ν•΄μ„ μ²λ¦¬
	- **μ• ν”λ¦¬μΌ€μ΄μ… μ΄λ²¤νΈ**
		- μ΄λ²¤νΈλ¥Ό λ°ν–‰ν•κ³  κµ¬λ…ν•λ” λ¨λΈμ„ νΈλ¦¬ν•κ² μ§€μ›
	- **νΈλ¦¬ν• λ¦¬μ†μ¤ μ΅°ν**
		- νμΌ, ν΄λμ¤ν¨μ¤, μ™Έλ¶€ λ“±μ—μ„ λ¦¬μ†μ¤λ¥Ό νΈλ¦¬ν•κ² μ΅°ν

## μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ„¤μ • ν•μ‹ - μ–΄λ…Έν…μ΄μ…, JAVA μ½”λ“, XML
- μ§€κΈκΉμ§€ μ„¤λ…ν• λ°©μ‹μ€ μ–΄λ…Έν…μ΄μ… λ°©μ‹μ΄κ³  JAVA μ½”λ“ λ°©μ‹κ³Ό XML λ°©μ‹μ„ μ΄μ©ν•μ—¬ μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ„¤μ •μ„ ν•  μ μλ‹¤.
- ν•μ§€λ§ λ€λ¶€λ¶„μ κ²½μ° μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— μ΄ λ¶€λ¶„μ€ λ„μ–΄κ°„λ‹¤. 

## μ¤ν”„λ§ λΉ μ„¤μ • λ©”νƒ€ μ •λ³΄ - BeanDefinition
λ‹¤μ–‘ν• μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ„¤μ • ν•μ‹μ„ μ§€μ›ν•  μ μλ” μ΄μ λ” `BeanDefinition`μ΄λΌλ” μ¶”μƒν™” λ•λ¶„μ΄λ‹¤.

![](Image/Pasted%20image%2020240913175804.png)
- μ„Έ κ°€μ§€ κµ¬μ²΄μ μΈ μ„¤μ • ν•μ‹μ„ μ¶”μƒν™”ν• κ²ƒμ΄ `BeanDefinition`μ΄κ³  μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” `BeanDefinition`λ§ μ°Έμ΅°ν•μ—¬ μ¤ν”„λ§ λΉμ„ κ΄€λ¦¬ν•  μ μλ‹¤.

![](Image/{39C0BD25-3D74-4BED-A7D0-F73E0F54DC54}.png)
- `AnnotationConfigApplicationContext`λ” `AnnotatedBeanDefinitionReader`λ¥Ό μ‚¬μ©ν•΄μ„ `AppConfig.class` λ¥Ό μ½κ³  `BeanDefinition` μ„ μƒμ„±ν•λ‹¤.
- `GenericXmlApplicationContext` λ” `XmlBeanDefinitionReader` λ¥Ό μ‚¬μ©ν•΄μ„ `appConfig.xml` μ„¤μ • μ •λ³΄λ¥Ό μ½κ³  `BeanDefinition` μ„ μƒμ„±ν•λ‹¤.
- μƒλ΅μ΄ ν•μ‹μ μ„¤μ • μ •λ³΄κ°€ μ¶”κ°€λλ©΄, `XxxBeanDefinitionReader`λ¥Ό λ§λ“¤μ–΄μ„ `BeanDefinition` μ„ μƒμ„±ν•λ©΄ λλ‹¤

### BeanDefinition μ •λ³΄(μ°Έκ³ )
- **BeanClassName**: μƒμ„±ν•  λΉμ ν΄λμ¤ λ…(μλ°” μ„¤μ • μ²λΌ ν©ν† λ¦¬ μ—­ν• μ λΉμ„ μ‚¬μ©ν•λ©΄ μ—†μ)
- **factoryBeanName**: ν©ν† λ¦¬ μ—­ν• μ λΉμ„ μ‚¬μ©ν•  κ²½μ° μ΄λ¦„, μ) appConfig
- **factoryMethodName**: λΉμ„ μƒμ„±ν•  ν©ν† λ¦¬ λ©”μ„λ“ μ§€μ •, μ) memberService
- **Scope**: μ‹±κΈ€ν†¤(κΈ°λ³Έκ°’)
- **lazyInit**: μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μƒμ„±ν•  λ• λΉμ„ μƒμ„±ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, μ‹¤μ  λΉμ„ μ‚¬μ©ν•  λ• κΉμ§€ μµλ€ν• μƒμ„±μ„ μ§€μ—° μ²λ¦¬ ν•λ”μ§€ μ—¬λ¶€
- **InitMethodName**: λΉμ„ μƒμ„±ν•κ³ , μμ΅΄κ΄€κ³„λ¥Ό μ μ©ν• λ’¤μ— νΈμ¶λλ” μ΄κΈ°ν™” λ©”μ„λ“ λ…
- **DestroyMethodName**: λΉμ μƒλ…μ£ΌκΈ°κ°€ λλ‚μ„ μ κ±°ν•κΈ° μ§μ „μ— νΈμ¶λλ” λ©”μ„λ“ λ…
- **Constructor arguments, Properties**: μμ΅΄κ΄€κ³„ μ£Όμ…μ—μ„ μ‚¬μ©ν•λ‹¤. (μλ°” μ„¤μ • μ²λΌ ν©ν† λ¦¬ μ—­ν• μ λΉμ„ μ‚¬μ© ν•λ©΄ μ—†μ)