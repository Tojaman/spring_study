# ğŸ“Œ ëª©ì°¨
- ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘
- ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean
- ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ
- ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy

# ğŸ’¡ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘
ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.
ìŠ¤í”„ë§ì„ í†µí•´ ì´ëŸ¬í•œ ì´ˆê¸°í™” ì‘ì—…ê³¼ ì¢…ë£Œ ì‘ì—…ì„ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ì§€ ì•Œì•„ë³´ì.

# ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ ìƒì„±
ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ë¥¼ í•˜ë‚˜ ìƒì„±í•œë‹¤ëŠ” ê°€ì •í•˜ì— í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.
ì‹¤ì œë¡œ ìƒì„±í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  ê°€ì •ë§Œ í•˜ëŠ” ê²ƒì´ë‹¤.

- ì™¸ë¶€ urlì— ì—°ê²°í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤

``` java
public class NetworkClient {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " +url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " +url);
    }
}

```

- ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ

``` java
public class BeanLifeCycleTest {

    @Test
    public void lifeCycleTest() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(LifeCycleConfig.class);
        NetworkClient client = ac.getBean(NetworkClient.class);
        ac.close(); // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œ, ConfigurableApplicationContext í•„ìš”
    }

    @Configuration
    static class LifeCycleConfig {

        @Bean
        public NetworkClient networkClient() {
            NetworkClient networkClient = new NetworkClient();
            networkClient.setUrl("http://hello-spring.dev");
            return networkClient;
        }
    }


}

```

ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.
![](Image/{DD96A234-7FD6-4093-97F3-BA5758D12595}.png)

ìˆ˜ì •ì ì£¼ì… ë©”ì„œë“œì¸ `setUrl()` ë©”ì„œë“œë¡œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ê¸° ì „ ì¶œë ¥í•œ ë©”ì‹œì§€ì´ë¯€ë¡œ ë‹¹ì—°í•œ ê²°ê³¼ì´ë‹¤.
ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚œ ë’¤ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë£Œëœë‹¤.
### ê°œë°œìëŠ” ì´ ì‹œì ì„ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?
ìŠ¤í”„ë§ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ **ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥**ì„ ì œê³µí•œë‹¤.
ë˜í•œ ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— **ì†Œë©¸ ì½œë°±**ì„ ì¤€ë‹¤.

- ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´
	- **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±** â†’ **ìŠ¤í”„ë§ ë¹ˆ ìƒì„±** â†’ **ì˜ì¡´ê´€ê³„ ì£¼ì…** â†’ **ì´ˆê¸°í™” ì½œë°±** â†’ **ì‚¬ìš©** â†’ **ì†Œë©¸ì „ ì½œë°±** â†’ **ìŠ¤í”„ë§ ì¢…ë£Œ
		- **ì´ˆê¸°í™” ì½œë°±**: ë¹ˆì´ ìƒì„±ë˜ê³  ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
		- **ì†Œë©¸ì „ ì½œë°±**: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ ì½œë°±

### ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™” ë¶„ë¦¬
**ìƒì„±ì**ëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³ , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ **ê°ì²´ë¥¼ ìƒì„±**í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤.
ë°˜ë©´ **ì´ˆê¸°í™”**ëŠ” ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ **ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“± ë¬´ê±°ìš´ ë™ì‘**ì„ ìˆ˜í–‰í•œë‹¤.
ë”°ë¼ì„œ ìƒì„±ì ì•ˆì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” **ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒ**ì´ **ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤**.
ë¬¼ë¡  ì´ˆê¸°í™” ì‘ì—…ì´ ë‚´ë¶€ ê°’ë“¤ì„ ì•½ê°„ ë³€ê²½í•˜ëŠ” ì •ë„ë¡œ ë‹¨ìˆœí•œ ê²½ìš°ì—ëŠ” ìƒì„±ìì—ì„œ í•œë²ˆì— ë‹¤ ì²˜ë¦¬í•˜ëŠ” ê²Œ ë” ë‚˜ì„ ìˆ˜ë„ ìˆë‹¤.

> ğŸ’¡ **ìƒëª…ì£¼ê¸°ê°€ ì§§ì€ ë¹ˆ(ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì „ì— ë¯¸ë¦¬ ì†Œë©¸í•˜ëŠ” ë¹ˆ)**
> ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìƒì¡´í•˜ëŠ” ë¹ˆë“¤ê³¼ ë‹¤ë¥´ê²Œ ìƒëª…ì£¼ê¸°ê°€ ì§§ì€ ë¹ˆë“¤ë„ ìˆë‹¤.
> ì´ëŸ¬í•œ ë¹ˆë“¤ì€ ì»¨í…Œì´ë„ˆì™€ ë¬´ê´€í•˜ê²Œ í•´ë‹¹ ë¹ˆì´ ì¢…ë£Œë˜ê¸° ì§ì „ì— ì†Œë©¸ì „ ì½œë°±ì´ ì¼ì–´ë‚œë‹¤. ì´ëŠ” ë‹¤ìŒ ì¥ì¸ ë¹ˆ ìŠ¤ì½”í”„ì—ì„œ ì•Œì•„ë³´ì.

### 3ê°€ì§€ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±
- ì¸í„°í˜ì´ìŠ¤(`InitializingBean`, `DisposableBean`)
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
- `@PostConstruct`, `@PreDestroy` ì• ë…¸í…Œì´ì…˜ ì§€ì›

ë‹¤ìŒ ì„¸ ê°€ì§€ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.
# ğŸ’¡ ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean
`InitializingBean`, `DisposableBean` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ì´ˆê¸°í™” ì½œë°±ê³¼ ì†Œë©¸ì „ ì½œë°±ì„ êµ¬í˜„í•´ë³´ì.

- `InitializingBean` ì¸í„°í˜ì´ìŠ¤ê°€ ì œê³µí•˜ëŠ” `afterPropertiesSet()`ì„ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ì´ˆê¸°í™” ì½œë°± ë©”ì„œë“œ êµ¬í˜„
- `DisposableBean` ì¸í„°í˜ì´ìŠ¤ê°€ ì œê³µí•˜ëŠ” `destroy()`ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ì†Œë©¸ ì „ ì½œë°±  ë©”ì„œë“œ êµ¬í˜„

``` java
public class NetworkClient implements InitializingBean, DisposableBean {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disConnect() {
        System.out.println("close: " + url);
    }

    // InitializingBean ì¸í„°í˜ì´ìŠ¤: ë©”ì†Œë“œ ì´ˆê¸°í™” ì½œë°±
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("NetworkClient.afterPropertiesSet");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    // DisposableBean ì¸í„°í˜ì´ìŠ¤: ë©”ì†Œë“œ ì†Œë©¸ì „ ì½œë°±
    @Override
    public void destroy() throws Exception {
        System.out.println("Closing NetworkClient.destroy");
        disConnect();
    }
}

```

``` java
@Configuration
static class LifeCycleConfig {

	@Bean
	public NetworkClient networkClient() {
		NetworkClient networkClient = new NetworkClient();
		networkClient.setUrl("http://hello-spring.dev");
		return networkClient;
	}
}
```

- ì¶œë ¥ ê²°ê³¼
![](Image/{CE1F4DA2-0C3C-4584-8082-79376F6EDE9E}.png)

### ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì 
- ë‘ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë¼ì„œ í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.
- ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
- ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.
	- InitializingBeanê³¼ DisposableBeanë¥¼ êµ¬í˜„í•˜ë„ë¡ ëŒ€ìƒ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤.
	- í•˜ì§€ë§Œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ì´ë¯¸ ì»´íŒŒì¼ëœ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ì½”ë“œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
		- í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë˜ìŠ¤ì— implements InitializingBean, DisposableBeanë¥¼ í•´ì„œ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•˜ëŠ”ë° ì´ê²Œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ëœ»ì´ë‹¤.

> ì´ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°ì— ë‚˜ì˜¨ ë°©ë²•ë“¤ì´ê³ , ì§€ê¸ˆì€ ë” ë‚˜ì€ ë°©ë²•ë“¤ì´ ìˆì–´ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
# ğŸ’¡ ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ
ë¹ˆì„ ë“±ë¡í•  ë•Œ ì„¤ì • ì •ë³´ì— `@Bean(initMethod = "init", destroyMethod = "close")` ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤

- ì´ˆê¸°í™” ë©”ì„œë“œ - `init()`
- ì†Œë©¸ ë©”ì„œë“œ - `close()`

``` java
public class NetworkClient {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disConnect() {
        System.out.println("close: " + url);
    }

    public void init() {
        System.out.println("NetworkClient.init");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    public void close() {
        System.out.println("NetworkClient.close");
        disConnect();
    }
```

- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œ ì§€ì •

``` java
@Configuration
static class LifeCycleConfig {

	@Bean(initMethod = "init", destroyMethod = "close")
	public NetworkClient networkClient() {
		NetworkClient networkClient = new NetworkClient();
		networkClient.setUrl("http://hello-spring.dev");
		return networkClient;
	}
}
```

- ê²°ê³¼
![](Image/{F428ED95-429A-4093-A28F-08FAA4C4B5EC}.png)

### ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•
- ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
	- ì¸í„°í˜ì´ìŠ¤ ë°©ì‹ì€ ì˜¤ë²„ë¼ì´ë”©ì„ í•˜ê¸° ë•Œë¬¸ì— ì„¤ì •ì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ ê°œë°œìê°€ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ë©”ì†Œë“œì´ê¸° ë•Œë¬¸ì— ììœ ë¡­ê²Œ ì„¤ì • ê°€ëŠ¥
- ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
	- ì¸í„°í˜ì´ìŠ¤ ë°©ì‹ê³¼ ë‹¤ë¥´ê²Œ ìŠ¤í”„ë§ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸
- ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.
	- ì¸í„°í˜ì´ìŠ¤ ë°©ì‹ê³¼ ë‹¤ë¥´ê²Œ ì½”ë“œë¥¼ ê³ ì¹  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ê°€ëŠ¥
### ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ 
- `@Beanì˜ destroyMethod` ì†ì„±ì—ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆë‹¤
	- `String destroyMethod() default "(inferred)";`
	- ìœ„ì²˜ëŸ¼ `destroyMethod`ì˜ ë””í´íŠ¸ ê°’ì´ `inferred`ë¡œ ë˜ì–´ ìˆë‹¤.
	- ì´ ì¶”ë¡ (`inferred`) ê¸°ëŠ¥ì€ `close`, `shutdown`ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì„œë“œê°€ ìˆë‹¤ë©´ ì°¾ì•„ì„œ ê·¸ ë©”ì†Œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.
	- ë”°ë¼ì„œ ì¢…ë£Œ ë©”ì„œë“œë¥¼ `close`ë‚˜ `shutdown`ìœ¼ë¡œ ì§€ì •í–ˆë‹¤ë©´ `destroyMethod`ë¥¼ ë”°ë¡œ ì ì–´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤.
		- `@Bean(initMethod = "init", destroyMethod = "close")`ê°€ ì•„ë‹Œ
		- `@Bean(initMethod = "init")`ë§Œ ì ì–´ë„ ì •ìƒ ì‘ë™í•œë‹¤.
- ì¶”ë¡  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì‹«ìœ¼ë©´ `destroyMethod=""` ì²˜ëŸ¼ ë¹ˆ ê³µë°±ì„ ì§€ì •í•˜ë©´ ëœë‹¤
	- ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì¶”ë¡  ê¸°ëŠ¥ì¸ `close`, `shutdown` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ -> ì†Œë©¸ ì‹œì ì— ì•„ë¬´ ì‘ì—…ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ
	- `@Bean(initMethod = "init", destroyMethod = "")`

# ğŸ’¡ ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy
ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œì— `@PostConstruct`, `@PreDestroy`ë§Œ ë¶™ì—¬ì£¼ë©´ ê°„í¸í•˜ê²Œ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

``` java
import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;

public class NetworkClient {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disConnect() {
        System.out.println("close: " + url);
    }

    @PostConstruct
    public void init() {
        System.out.println("NetworkClient.init");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    @PreDestroy
    public void close() {
        System.out.println("NetworkClient.close");
        disConnect();
    }
```

``` java
@Configuration
static class LifeCycleConfig {

	@Bean
	public NetworkClient networkClient() {
		NetworkClient networkClient = new NetworkClient();
		networkClient.setUrl("http://hello-spring.dev");
		return networkClient;
	}
}
```

- ì‹¤í–‰ ê²°ê³¼
![](Image/{F051C27A-03FC-4CA6-A13D-A766C3F22CB8}.png)

### @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ íŠ¹ì§•
- ìµœì‹  ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´ ë˜ë¯€ë¡œ ê°€ì¥ í¸ë¦¬í•˜ë‹¤.
- íŒ¨í‚¤ì§€ë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ ê¸°ìˆ ì´ ì•„ë‹Œ `jakarta` ê¸°ìˆ ì´ë‹¤. ë•ë¶„ì— ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘í•œë‹¤.
	- `import jakarta.annotation.PostConstruct;`
	- `import jakarta.annotation.PreDestroy;`
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦°ë‹¤.
### ìœ ì¼í•œ ë‹¨ì 
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•œë‹¤.
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ì¢…ë£Œí•˜ë ¤ë©´ `@Bean`ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì.
	- ë¹ˆì„ ë“±ë¡í•  ë•Œ ì„¤ì • ì •ë³´ì— `@Bean(initMethod = "init", destroyMethod = "close")` ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²• ì‚¬ìš©í•˜ì.
# ìš”ì•½ ì •ë¦¬
- **@PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì**
- ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œí•´ì•¼ í•˜ë©´ `@Bean` ì˜ `initMethod` , `destroyMethod` ë¥¼ ì‚¬ìš©í•˜ì
- ì¸í„°í˜ì´ìŠ¤ `InitializingBean`, `DisposableBean`ì€ ì‚¬ì‹¤ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.